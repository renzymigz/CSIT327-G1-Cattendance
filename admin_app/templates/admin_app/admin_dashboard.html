{% extends "admin_app/base_dashboard.html" %}
{% block title %}Admin Dashboard | Cattendance{% endblock %}
{% block content %}
<div class="p-6">
  <div class="flex justify-between items-center mb-6">
    <div class="grid grid-col gap-y-5">
      <h1 class="text-2xl font-bold text-[#6a1e1e]">Admin Dashboard</h1>
      <p>View and manage all your added teachers</p>
    </div>
  </div>

  <!-- Create Teacher Form -->

  <div
    class="max-w-[500px] border border-gray-200 rounded-b-[18px] bg-white relative shadow-[0_8px_30px_rgb(0,0,0,0.12)] "
  >
    <div class="absolute top-1 left-0 right-0 h-[6px] rounded-t-lg shadow-[0px_-8px_0px_0px_#a2314b] pointer-events-none"></div>
    <!-- Content -->
    <div class="p-4 sm:p-6">
      <form
        method="POST"
        action="{% url 'add_teacher' %}"
        class="bg-white flex flex-col gap-2"
      >
        {% csrf_token %}
        <h2 class="text-xl font-semibold">Create Teacher Account</h2>
        <p class = "text-[#555555]">Add a new teacher to the system</p>
        <div class="space-y-2 relative">
          <label class="text-[14px] font-semibold">First Name</label>
          <div class="relative">
            <input
              type="text"
              id="first_name"
              name="first_name"
              placeholder="Enter first name"
              class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]"
            />
            <i
              class="fa-solid fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 peer-focus:text-[#a2314b] transition-colors"
            ></i>
          </div>
        </div>

        <div class="space-y-2 relative">
          <label class="text-[14px] font-semibold">Last Name</label>
          <div class="relative">
            <input
              type="text"
              id="last_name"
              name="last_name"
              placeholder="Enter last name"
              class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]"
            />
            <i
              class="fa-solid fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 peer-focus:text-[#a2314b] transition-colors"
            ></i>
          </div>
        </div>

        <div class="space-y-2 relative">
          <label class="text-[14px] font-semibold">Email</label>
          <div class="relative">
            <input
              type="email"
              id="email"
              name="email"
              placeholder="teacher@school.edu"
              class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]"
            />
            <i
              class="fa-solid fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 peer-focus:text-[#a2314b] transition-colors"
            ></i>
          </div>
        </div>

        <div class="space-y-2 relative">
          <label class="text-[14px] font-semibold">Employee ID</label>
          <div class="relative">
            <input
              type="text"
              id="employee_id"
              name="employee_id"
              placeholder="Enter employee ID"
              class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]"
            />
            <i
              class="fa-solid fa-id-card absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 peer-focus:text-[#a2314b] transition-colors"
            ></i>
          </div>
        </div>

        <div class="mt-3">
          <button
            type="submit"
            class="bg-gradient-to-r from-[#a2314b] to-[#d64648] text-white px-4 py-2 rounded w-full justify-center flex items-center gap-2 font-semibold"
          >
            <i class="fa-solid fa-plus"></i>Create Teacher Account
          </button>
        </div>
      </form>
    </div>
  </div>

  <!--  DISPLAY DJANGO MESSAGES (SUCCESS/ERROR) -->
  {% if messages %} {% for message in messages %}
  <div
    class="mt-4 p-3 text-center max-w-[500px] items-center rounded-lg text-sm font-medium {% if message.tags == 'error' %}bg-red-100 text-red-700 border border-red-300{% elif message.tags == 'success' %}bg-green-100 text-green-700 border border-green-300{% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-700 border border-yellow-300{% else %}bg-blue-100 text-blue-700 border border-blue-300{% endif %}"
  >
    {{ message }}
  </div>
  {% endfor %} {% endif %}

  <!-- Recently Added Teachers -->
  <div class="bg-white rounded-xl shadow border border-gray-200 mb-8 tab-section  mt-8">
    <div class = "flex items-center justify-between p-5 text-center">
        <h2 class="text-lg font-semibold text-[#6a1e1e] text-center justify-center items-center">Recently Added Teachers</h2>
    </div>
    
    {% if recent_teachers %}
    <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden">
      <thead class = "bg-[#f9fafa]">
        <tr class="text-gray-700 ">
          <th class="text-left px-5 p-2 font-semibold">Employee ID</th>
          <th class="text-left p-2 font-semibold">Name</th>
          <th class="text-left p-2 font-semibold">Email</th>
          <th class="text-left p-2 font-semibold">Date Joined</th>
        </tr>
      </thead>
      <hr class = "">
      <tbody>
        {% for teacher in recent_teachers %}
        <tr class="border-t hover:bg-gray-50 transition">
          <td class="px-5 p-2">{{ teacher.teacherprofile.employee_id }}</td>
          <td class="p-2">{{ teacher.get_full_name }}</td>
          <td class="p-2">{{ teacher.email }}</td>
          <td class="p-2">{{ teacher.date_joined|date:"M d, Y" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="text-gray-500">No teachers added yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
