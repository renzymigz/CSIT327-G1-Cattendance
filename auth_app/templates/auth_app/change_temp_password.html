{% extends "auth_app/base_auth.html" %} 
{% block title %}Change Password |Cattendance{% endblock %}

{% block content %}
<h1 class="font-semibold text-[24px] mb-2 text-center">Change Temporary Password</h1>
<h1 class="text-[14px] text-[rgb(123,137,157)] mb-6 text-center">
  Sign in as a
  <span id="role-text" class="font-semibold border px-3 rounded-2xl border-[#a2314b] text-[#a2314b] bg-white">
    Teacher
  </span>
</h1>
<form method="post" class = "flex flex-col gap-4">
  {% csrf_token %}
  <div class="space-y-2 relative">
    <label class="text-[14px] font-semibold">Password</label>
    <div class="relative">
      <input type="password" id="password1" name="new_password" placeholder="Enter your password"
             class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 pr-10 py-1 border border-gray-300 rounded-lg 
                    focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]">
      <i class="fa-solid fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 
                peer-focus:text-[#a2314b] transition-colors"></i>
      <i class="fa-solid fa-eye absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer" 
         onclick="togglePassword('password1', this)"></i>
    </div>
  </div>

  <div class="space-y-2 relative">
    <label class="text-[14px] font-semibold">Confirm Password</label>
    <div class="relative">
      <input type="password" id="password2" name="confirm_password" placeholder="Confirm your password"
             class="peer w-full placeholder:text-[14px] bg-[#f6f7f8] pl-10 pr-10 py-1 border border-gray-300 rounded-lg 
                    focus:outline-none focus:ring-2 focus:ring-[#a2314b] focus:border-[#c9c9c9] transition text-[14px]">
      <i class="fa-solid fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 
                peer-focus:text-[#a2314b] transition-colors"></i>
      <i class="fa-solid fa-eye absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer" 
         onclick="togglePassword('password2', this)"></i>
    </div>
  </div>

  <div class="mt-4">
    <button type="submit" 
        class="w-full py-2 text-[14px] bg-gradient-to-r from-[#a2314b] to-[#d64648] text-white rounded 
               flex items-center justify-center gap-2 group">
      Submit 
      <i class="fa-solid fa-arrow-right transition-transform duration-200 group-hover:translate-x-2"></i>
    </button>
  </div>
</form>

{% if messages %}
    {% for message in messages %}
      <div class="mt-4 p-3 text-center items-center rounded-lg text-sm font-medium {% if message.tags == 'error' %}bg-red-100 text-red-700 border border-red-300{% elif message.tags == 'success' %}bg-green-100 text-green-700 border border-green-300{% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-700 border border-yellow-300{% else %}bg-blue-100 text-blue-700 border border-blue-300{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

<script>
  function togglePassword(fieldId, icon) {
  const input = document.getElementById(fieldId);
  if (input.type === "password") {
    input.type = "text";
    icon.classList.remove("fa-eye");
    icon.classList.add("fa-eye-slash");
  } else {
    input.type = "password";
    icon.classList.remove("fa-eye-slash");
    icon.classList.add("fa-eye");
  }
}

  //  CONNECT ROLE SELECTOR TO FORM - This gets called from base_auth.html
  function updateSelectedRole(role) {
    const hiddenRoleField = document.getElementById('selected-role');
    if (hiddenRoleField) {
      hiddenRoleField.value = role;
    }
  }
</script>

{% endblock %}
