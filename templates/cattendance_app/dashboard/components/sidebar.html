{% load static %}
<!-- Sidebar -->
<div class="bg-white shadow-lg w-72 fixed h-full">
     <div class="flex items-center mx-auto gap-3 p-6 text-[#a2314b]">
        <img src="{% static 'images/logo.png' %}" class="w-[30px] h-[30px]" alt="Logo">
        <h1 class="text-xl font-bold">CATTENDANCE</h1>
    </div>
    
    <nav class="">
        <!-- Common menu items for both -->
        <div class="px-6 py-3">
            <a href="#" class="flex items-center text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg">
                <i class="fas fa-home mr-3"></i>
                Dashboard
            </a>
        </div>
        
        <!-- Conditional menu items based on user type -->
        {% if user_type == 'teacher' %}
            <!-- Teacher-specific menu items -->
            <div class="px-6 py-3">
                <a href="#" class="flex items-center text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg">
                    <i class="fas fa-users mr-3"></i>
                    Manage Classes
                </a>
            </div>
        {% else %}
            <!-- Student-specific menu items -->
            <div class="px-6 py-3">
                <a href="#" class="flex items-center text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg">
                    <i class="fas fa-calendar-check mr-3"></i>
                    My Attendance
                </a>
            </div>

        {% endif %}
        
        <!-- Common menu items -->
        <div class="px-6 py-3">
            <a href="#" class="flex items-center text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg">
                <i class="fas fa-user mr-3"></i>
                Profile
            </a>
        </div>
        <div class="px-6 py-3">
            <a href="#" class="flex items-center text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg">
                <i class="fas fa-cog mr-3"></i>
                Settings
            </a>
        </div>

        <!-- Logout button -->
    <div class="px-6 py-3">
      <button onclick="logoutUser()" 
        class="flex items-center text-red-600 hover:bg-red-50 px-4 py-2 rounded-lg w-full text-left">
        <i class="fas fa-sign-out-alt mr-3"></i>
        Logout
      </button>
    </div>
    </nav>

</div>

<!-- Supabase logout script -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    const SUPABASE_URL = "https://jbsfkipzulstrwvugrec.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impic2ZraXB6dWxzdHJ3dnVncmVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1NTY1NjEsImV4cCI6MjA3NTEzMjU2MX0.Cu-QSqBnJFlQ61LWldtxRFElt2OKHGxbL_prDRoGA1AeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impic2ZraXB6dWxzdHJ3dnVncmVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1NTY1NjEsImV4cCI6MjA3NTEzMjU2MX0.Cu-QSqBnJFlQ61LWldtxRFElt2OKHGxbL_prDRoGA1A";

  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  async function logoutUser() {
    const { error } = await supabase.auth.signOut()
    if (!error) {
      window.location.href = "{% url 'login' %}"
    } else {
      console.error('Logout failed:', error.message)
    }
  }
</script>
